/*
  CC3digo criado por Thiago Felski Pereira
  Move um caractere na matriz sem testes
  Ctil para implementaC'C#o de jogos
  com movimentaC'C#o de personagem.
  (TC-picos de algoritmos 1)
*/
#include <iostream>
#include <termios.h>
#include <unistd.h>
using namespace std;

int getch(void) {
	int ch;
	struct termios oldt;
	struct termios newt;
	tcgetattr(STDIN_FILENO, &oldt); // guarda as configuraC'C5es antigas
	newt = oldt; // copia as configuraC'C5es antigas para as novas
	newt.c_lflag &= ~(ICANON | ECHO); // faz uma mudanC'a nas novas configuraC'C5es
	tcsetattr(STDIN_FILENO, TCSANOW, &newt); // aplica as novas configuraC'C5es
	ch = getchar();                          // pega a tecla
	tcsetattr(STDIN_FILENO, TCSANOW, &oldt); // restaura as configuraC'C5es antigas
	return ch;                               // retorna o caractere lido
}

void SetCursorPos(int XPos, int YPos) {
	printf("\033[%d;%dH", YPos + 1, XPos + 1);
}

int main() {
	printf("\033[?25l"); //cC3digo para o desativar o cursor no console

	int px = 1, py = 1;
	int m[10][90] = {
	    {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
		{1, 2, 0, 0, 0, 1, 1, 6, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1, 0, 4, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
        {1, 0, 1, 1, 1, 1, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
        {1, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 10},
        {1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
        {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}
	};

	char x;
	while (true) {
	    printf("\033[1;37m");
		cout << "Vidas:â¤ï¸ï¸ â¤ï¸ â¤ï¸ \n";
		printf("\033[0m");
		// imprime matriz
		for (int i = 0; i < 10; i++) {
			for (int j = 0; j < 90; j++) {
				switch (m[i][j]) {
				case 0:
					cout << " ";
					break;
				case 1:
					printf("\033[0;44m");// fundo do texto azul
					cout << " ";
					printf("\033[0m");//todo texto normal
					break;
				case 2:
					cout << "@";
					break;
				case 3:
				    printf("\033[0;46m");
				    cout << " ";
					printf("\033[0m");//todo texto normal
					break;
				case 4:
				    printf("\033[1;33m");
				    cout << "â–“";
					printf("\033[0m");//todo texto normal
					break;
				case 5:
				    cout << "ðŸš©";
					break;
				case 6:
				    printf("\033[1;31m");
				    cout << "*";
					printf("\033[0m");//todo texto normal
					break;
				case 10:
				    printf("\033[0;47m");
				    cout << "ðŸšª";
					printf("\033[0m");//todo texto normal
					break;
				default:
					cout << " ";
				}
			}
			cout << endl;
		}
		printf("\033[1;37m");
		cout << "Nivel 1\n";
		printf("\033[0m");
		// atualiza jogador
		x = getch(); // pega a tecla
		switch (x) {
		case 'w':
			if (m[px-1][py] == 0) {
				// remove da posiC'C#o antiga
				m[px][py] = 0;
				// adiciona na nova posiC'C#o
				px = px - 1;
				m[px][py] = 2;
			}
			else if (m[px-1][py] == 5){
			    return 0;
			}
			break;
		case 's':
			// remove da posiC'C#o antiga
			if (m[px+1][py] == 0) {
				m[px][py] = 0;
				// adiciona na nova posiC'C#o
				px = px + 1;
				m[px][py] = 2;
			}
			else if (m[px+1][py] == 5){
			    return 0;
			}
			break;

		case 'a':
			if (m[px][py-1] == 0) {
				// remove da posiC'C#o antiga
				m[px][py] = 0;
				// adiciona na nova posiC'C#o
				py = py - 1;
				m[px][py] = 2;
			}
			else if (m[px][py-1] == 5){
			    return 0;
			}
			break;

		case 'd':
			if (m[px][py+1] == 0) {
				// remove da posiC'C#o antiga
				m[px][py] = 0;
				// adiciona na nova posiC'C#o
				py = py + 1;
				m[px][py] = 2;
			}
			else if (m[px][py+1] == 5){
			    return 0;
			}
			break;
			// default:
		}
		// coloca o cursor na posiC'C#o inicial
		SetCursorPos(0, 0);
		//(void)system("clear");
	}

	return 0;
}
